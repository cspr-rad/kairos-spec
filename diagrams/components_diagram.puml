@startuml
node "CliClient" {
}

node "KairosNode" {
  port 443
  () "deposit"
  () "withdraw"
  () "transfer"
  () "verify"
  () "getBalance"
  () "getTransactions"
}

node "Prover" {
  port p443
  () "prove"
  () "pVerify"
}

database "Database - primary" {
  folder "Balances" {
  }
  folder "Transactions" {
  }
}
database "Database - standby 1" {
}
database "Database - standby 2" {
}
cloud "Casper Blockchain" {
  [VerifierContract]
  [KairosStateContract]
}

"CliClient" --> "443"

"transfer" --> "p443"
"transfer"  --> "prove"
"transfer"  --> "Database - primary"
"transfer"  --> "KairosStateContract"


"deposit"  --> "KairosStateContract"
"deposit"  --> "Database - primary"

"withdraw"  --> "KairosStateContract"
"withdraw"  --> "Database - primary"

"verify" --> "pVerify"

"getBalance"  --> "Database - primary"

"getTransactions"  --> "Database - primary"

"Database - primary" --> "Database - standby 1"
"Database - primary" --> "Database - standby 2"

"KairosStateContract" --> "VerifierContract"
@enduml
